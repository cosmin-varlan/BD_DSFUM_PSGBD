<h2> Instalarea Oracle Express Edition 11g </h2>

<p>In cazul in care veti utiliza laptopurile personale, va rugam sa instalati [https://profs.info.uaic.ro/~bd/11g/OracleXE112_Win64.zip Oracle Express Edition 11g Release 2] versiunea pentru Windows. Puteti face download si de pe pagina [https://www.oracle.com/database/technologies/xe-prior-release-downloads.html Oracle] atat pentru Windows cat si pentru Linux. Acest SGBD este suficient pentru buna desfasurare a orelor de laborator, celelalte versiuni fiind mult mai stufoase si incluzand utilizari avansate (de exemplu distribuirea bazei de date in cloud sau accesarea acesteia utilizand mai multe procesoare).</p>

<p>Pentru a descarca alta varianta de Oracle express edition, aveti nevoie de un cont creat pe situl Oracle.</p>

<p>In timpul instalarii vi se va solicita o parola. Aceasta este parola de administrare ce va fi utila daca vreti sa administrati serverul de la distanta. Local aceasta parola va fi ignorata de catre SQL*Plus.</p>

<h2> Configurarea unui cont </h2>
<p><code>SQLPLUS /NOLOG</code> -- Cu aceasta comanda rulata din consola am deschis utilitarul SQL Plus fara a ne conecta la nici o baza de date (daca nu am folosi optiunea /NOLOG ne-ar cere automat un user si o parola). Mai departe ne vom conecta la userul default SYS:</p>



<p><code>CONN / AS SYSDBA</code> (sau <code>CONN SYS AS SYSDBA</code> sau explicit cu parola pentru primul laborator pana se vor propaga toate drepturile <code>CONN SYS/sql AS SYSDBA</code>) -- Permite conectarea contului "SYS" cu rolul de administrator al bazei de date. Din contul SYS se poate opera la nivelul intregii baze de date. Spre exemplu, dand comanda <code>SELECT TABLE_NAME FROM DBA_TABLES</code> se pot vedea toate tabelele existente in baza de date (care sunt prin definitie alocate contului SYS). In mod normal, un utilizator oarecare nu ar trebui sa aiba dreptul sa acceseze aceste tabele. Accesul neautorizat la acest cont sau la aceste tabele pot constitui o bresa serioasa de securitate. Din acest motiv, fiecare utilizator va avea contul sau propriu. Conturile pot fi create din contul de administrator (SYS as SYSDBA) utilizand comanda:</p>



<p><code>CREATE USER STUDENT IDENTIFIED BY STUDENT DEFAULT TABLESPACE USERS TEMPORARY TABLESPACE TEMP;</code> -- felicitari, tocmai ati creat un user cu numele STUDENT si parola STUDENT (e case sensitive, o scrieti doar cu litere mari cand va conectati). Preferam ca peste tot, cel putin in laboratoare, userii sa aiba acest nume si aceasta parola. In acest fel nu veti fi nevoiti sa modificati numele userului in scripturile pe care vi le vom furniza mai tarziu. In caz ca exista deja userul STUDENT pe acel calculator si primiti eroarea ORA-01920: user name STUDENT conflicts with another user or role name stergeti acel user folosind comanda <code>DROP USER STUDENT CASCADE;</code> si apoi re-executati comanda de creare. Comenzile de creare si stergere de conturi utilizator se pot executa doar conectati cu SYS, nu si de pe contul in cauza. In caz ca ati instalat Oracle XE 12c si vreti sa creati totusi un user folositi ca si nume in loc de STUDENT c##STUDENT cu promisiunea ca apoi sa va dezinstalati 12c si sa instalati cum v-am cerut in prima sectiune [https://profs.info.uaic.ro/~bd/11g/OracleXE112_Win64.zip Oracle Express Edtition 11g Release 2]. Si acum sa-i dam noului user cateva drepturi:</p>



<p><code>ALTER USER STUDENT QUOTA 100M ON USERS;</code> -- v-ati alocat maxim 100mb spatiu pe baza de date. Mai tarziu, in caz ca veti incerca sa introduceti milioane de inregistrari intr-o tabela s-ar putea sa primiti eroarea ORA-01536: space quota exceeded for tablespace 'USERS'. Solutia e simpla: curatati obiectele mai vechi sau introduceti mai putine date.</p>

<p><code>GRANT CONNECT TO STUDENT;</code> -- userul a primit dreptul sa se conecteze la baza de date. Gasiti in partea de jos a paginii comanda pentru conectare.</p>

<p><code>GRANT CREATE TABLE TO STUDENT;</code> -- userul a primit dreptul sa creeze tabele, constrainturi si indecsi (urmatoarele 5 comentarii vor fi foarte similare, fac apel la rabdarea voastra sa le suportati).</p>

<p><code>GRANT CREATE VIEW TO STUDENT;</code> -- userul a primit dreptul sa creeze viewuri</p>

<p><code>GRANT CREATE SEQUENCE TO STUDENT;</code> -- userul a primit dreptul sa creeze secvente</p>

<p><code>GRANT CREATE TRIGGER TO STUDENT;</code> -- userul a primit dreptul sa creeze triggere</p>

<p><code>GRANT CREATE SYNONYM TO STUDENT;</code> -- userul a primit dreptul sa creeze sinonime</p>

<p><code>GRANT CREATE PROCEDURE TO STUDENT;</code> -- userul a primit dreptul sa creeze proceduri, functii si pachete</p>

<p><code>GRANT CREATE TYPE TO STUDENT;</code> -- userul a primit dreptul de a crea tipuri de date (de exemplu tabele imbricate)</p>

<p><!--><code>GRANT SELECT_CATALOG_ROLE TO STUDENT;</code> -- userul a primit un rol si prin acesta un set de permisiuni prin care va putea accesa anumite viewuri sistem. Vom ajunge si la ele in laboratoarele urmatoare. Am preferat sa acordam aceste drepturi direct prin rol ca sa evitam sa scriem 50 de comenzi cu nume de viewuri si pachete Oracle care nu prea inseamna nimic deocamdata.</p>

<p><code>GRANT EXECUTE_CATALOG_ROLE TO STUDENT;</code> -- userul a primit un alt rol si prin acesta un set de permisiuni prin care va putea executa functii si proceduri din pachete sistem. La fel, vom ajunge mai tarziu la ele. Si cu asta am cam terminat cu drepturile. Sa vedem cum ne conectam cu userul nou creat la baza de date:</p>

<p><--></p>

<p><code>CONN STUDENT/STUDENT@localhost/XE</code> -- felicitari, tocmai v-ati conectat cu userul proaspat creat. Orice conexiune la o baza de date Oracle va respecta template-ul: CONN (sau CONNECT) <user>/<parola>@<db server>/<nume serviciu>. In cazul nostru ne conectam pe serverul instalat local cu numele default de serviciu XE. Daca schimbati numele serviciului la instalarea Oracle va trebuiti sa folositi acel nume. Odata conectati la baza de date, va puteti reconecta cu alt cont doar specificand userul si parola: <code>CONN STUDENT/STUDENT</code></p>



<p><code>SELECT 1 FROM DUAL;</code> -- ati executat primul select, puteti incepe lucrul la [[Laborator 1|prima tema de laborator]] sau puteti consulta [[Ghid SQLPlus|manualul utilitarului SQLPlus]] in care deja ati editat deja comenzile de mai sus si cu care veti lucra pe parcursul semestrului.</p>

<p>Alternativ (si rapid): descarcati si rulati urmatorul fisier SQL: https://profs.info.uaic.ro/~vcosmin/BD/create_student.sql</p>

<p><!-- ./sqlplus USER/PASS@85.122.23.119/XE --></p>
